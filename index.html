<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch√∫c M·ª´ng NƒÉm M·ªõi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
        <style>
    @import url('https://fonts.googleapis.com/css2?family=UVN+Cat+Bien&display=swap'); /* Font ch·ªØ T·∫øt */
    @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap'); /* Font ngh·ªá thu·∫≠t kh√°c */

    body {
        background: url('anhbia.png') no-repeat center center fixed;
        background-size: cover;
        text-align: center;
        padding: 50px;
        font-family: 'Arial', sans-serif;
        color: #333;
        overflow: hidden; /* NgƒÉn cu·ªôn khi hi·ªÉn th·ªã l·ªùi ch√∫c */
    }

    .intro-messages {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
    }

    .intro-messages .message {
        font-family: 'UVN Cat Bien', sans-serif; /* Font ch·ªØ mang phong c√°ch ng√†y T·∫øt */
        font-size: 30px; /* Gi·∫£m th√™m k√≠ch th∆∞·ªõc ch·ªØ */
        font-weight: bold;
        color: #f8c20f; /* M√†u v√†ng ch·ªß ƒë·∫°o */
        text-shadow: 2px 2px 8px rgba(255, 0, 0, 0.8); /* T·∫°o hi·ªáu ·ª©ng b√≥ng ƒë·ªè ƒë·∫≠m */
        opacity: 0; /* M·ªù m·∫∑c ƒë·ªãnh */
        visibility: hidden; /* ·∫®n m·∫∑c ƒë·ªãnh */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    /* Hi·ªáu ·ª©ng m·ªù v√† ph√≥ng to cho c√°c c√¢u ch√∫c */
    @keyframes fadeAndZoom {
        0% {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.8); /* Nh·ªè h∆°n khi b·∫Øt ƒë·∫ßu */
        }
        25% {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.1); /* Ph√≥ng to nh·∫π */
        }
        75% {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1); /* Gi·ªØ k√≠ch th∆∞·ªõc b√¨nh th∆∞·ªùng */
        }
        100% {
            opacity: 0;
            transform: translate(-50%, -50%) scale(1.2); /* Nh·ªè l·∫°i v√† bi·∫øn m·∫•t */
        }
    }

    .message-animate {
        animation: fadeAndZoom 2.5s ease-in-out forwards; /* Hi·ªáu ·ª©ng 2.5 gi√¢y */
    }

    /* Form ch√≠nh (gi·ªØ nguy√™n giao di·ªán tr∆∞·ªõc) */
    .container {
        max-width: 600px;
        margin: auto;
        background: rgba(255, 255, 255, 0.95);
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
        animation: slideIn 1s ease-in-out; /* Hi·ªáu ·ª©ng l∆∞·ªõt xu·ªëng */
        display: none; /* ·∫®n container ban ƒë·∫ßu */
    }

    h1 {
        font-family: 'Pacifico', cursive;
        font-size: 50px;
        color: #e63946;
        text-shadow: 2px 4px 10px rgba(0, 0, 0, 0.2);
        margin-bottom: 30px;
    }

    .form-label {
        font-family: 'Poppins', sans-serif;
        font-size: 18px;
        font-weight: 600;
        color: #1d3557;
        margin-bottom: 8px;
    }

    input, select {
        font-family: 'Poppins', sans-serif;
        font-size: 16px;
        border: 2px solid #ff4500;
        border-radius: 15px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.9);
        box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease-in-out;
    }

    input:focus, select:focus {
        border-color: #e63946;
        box-shadow: 0 0 10px rgba(230, 57, 70, 0.5);
        outline: none;
    }

    .btn-success {
        font-weight: bold;
        font-size: 20px;
        border-radius: 20px;
        background: linear-gradient(90deg, #ff416c, #ff4b2b);
        border: none;
        padding: 15px 30px;
        transition: all 0.3s ease-in-out;
        color: #fff;
        text-transform: uppercase;
    }

    .btn-success:hover {
        background: linear-gradient(90deg, #ff4b2b, #ff416c);
        transform: scale(1.1);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }

    .footer-text {
        margin-top: 20px;
        font-size: 16px;
        font-style: italic;
        color: #6c757d;
    }

    /* Hi·ªáu ·ª©ng m·ªù d·∫ßn c·ªßa form */
    @keyframes fadeEffect {
        0% {
            opacity: 0;
            visibility: visible;
            transform: translateY(-20px);
        }
        100% {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
    }

    /* Hi·ªáu ·ª©ng l∆∞·ªõt xu·ªëng cho b·∫£ng */
    @keyframes slideIn {
        0% {
            transform: translateY(-100px);
            opacity: 0;
        }
        100% {
            transform: translateY(0);
            opacity: 1;
        }
    }
</style>
</head>
<body>
    <div class="intro-messages" id="introMessages">
        <p class="message">Ch√∫c c·∫≠u nƒÉm m·ªõi vui v·∫ª, h·∫°nh ph√∫c tr√†n ƒë·∫ßy.</p>
        <p class="message">Gia ƒë√¨nh ƒë·∫ßm ·∫•m, y√™u th∆∞∆°ng tr·ªçn v·∫πn.</p>
        <p class="message">C√¥ng vi·ªác thu·∫≠n l·ª£i, s·ª± nghi·ªáp v·ªØng v√†ng.</p>
        <p class="message">T√†i l·ªôc g√µ c·ª≠a, may m·∫Øn ng·∫≠p nh√†.</p>
        <p class="message">An khang th·ªãnh v∆∞·ª£ng, b√¨nh an c·∫£ nƒÉm.</p>
    </div>

    <div class="container" id="mainContent">
        <h1 class="mb-4">Ch√∫c M·ª´ng NƒÉm M·ªõi!</h1>
        <form id="infoForm">
            <div class="mb-3">
                <label for="name" class="form-label">üéâ Nh·∫≠p T√™n C·ªßa B·∫°n</label>
                <input type="text" class="form-control" id="name" name="name" required>
            </div>
            <div class="mb-3">
                <label for="wish" class="form-label">üìù Nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp mu·ªën g·ª≠i t·ªõi Th√†nh Danh ‚ù§Ô∏è</label>
                <input type="text" class="form-control" id="wish" name="wish" required>
            </div>
            <button type="submit" class="btn btn-success">üßß X√°c Nh·∫≠n üßß</button>
        </form>
        <p class="footer-text">Ch√∫c c·∫≠u m·ªôt nƒÉm m·ªõi an khang, th·ªãnh v∆∞·ª£ng!‚ù§Ô∏è</p>
    </div>
    <audio id="bg-music" loop>
        <source src="./nhactet.mp3" type="audio/mpeg">
    </audio>

    <script>
      const messages = document.querySelectorAll('.intro-messages .message');
        const mainContent = document.getElementById('mainContent');
        let currentMessageIndex = 0;

        function showNextMessage() {
    if (currentMessageIndex < messages.length) {
        const currentMessage = messages[currentMessageIndex];

        // Hi·ªÉn th·ªã l·ªùi ch√∫c hi·ªán t·∫°i v·ªõi hi·ªáu ·ª©ng
        currentMessage.style.visibility = 'visible';
        currentMessage.style.opacity = '1';
        currentMessage.classList.add('message-animate');

        // Sau 2.5 gi√¢y, ·∫©n l·ªùi ch√∫c hi·ªán t·∫°i v√† chuy·ªÉn sang c√¢u ti·∫øp theo
        setTimeout(() => {
            currentMessage.style.opacity = '0';
            currentMessage.style.visibility = 'hidden';
            currentMessage.classList.remove('message-animate');

            currentMessageIndex++; // TƒÉng ch·ªâ s·ªë l·ªùi ch√∫c
            showNextMessage(); // Hi·ªÉn th·ªã l·ªùi ch√∫c ti·∫øp theo
        }, 3000); // T·ªïng th·ªùi gian m·ªói c√¢u ch√∫c l√† 3 gi√¢y
    } else {
        // Hi·ªÉn th·ªã n·ªôi dung ch√≠nh sau khi ho√†n th√†nh t·∫•t c·∫£ c√°c c√¢u ch√∫c
        setTimeout(() => {
            document.getElementById('introMessages').style.display = 'none';
            mainContent.style.display = 'block';
        }, 500);
    }
}
        window.onload = function() {
            showNextMessage();
        }

        document.getElementById('infoForm').addEventListener('submit', function(event) {
            event.preventDefault();

            // L·∫•y th√¥ng tin t·ª´ form
            const name = document.getElementById('name').value;
            const wish = document.getElementById('wish').value;
            const time = new Date().toLocaleString(); // L·∫•y th·ªùi gian hi·ªán t·∫°i

            // L∆∞u th√¥ng tin v√†o localStorage ƒë·ªÉ s·ª≠ d·ª•ng tr√™n trang quay s·ªë
            localStorage.setItem('name', name);
            localStorage.setItem('wish', wish);
            localStorage.setItem('time', time);

            // G·ª≠i d·ªØ li·ªáu l√™n Google Sheets
            const scriptURL = "https://script.google.com/macros/s/AKfycbypC3XLsWoR9sEM7bzqYgDTpEmqMbU6QuGOow_MU8Yu8uKDc6kD_NrSRphNg_PQFBlm/exec";
            const formData = new FormData();
            formData.append('name', name);
            formData.append('wish', wish);
            formData.append('time', time);

            fetch(scriptURL, { method: 'POST', body: formData })
                .then(response => {
                    if (response.ok) {
                        window.location.href = "quayso.html"; // Chuy·ªÉn h∆∞·ªõng khi th√†nh c√¥ng
                    } else {
                        throw new Error('G·ª≠i d·ªØ li·ªáu th·∫•t b·∫°i');
                    }
                })
                .catch(error => {
                    alert("ƒê√£ x·∫£y ra l·ªói, vui l√≤ng th·ª≠ l·∫°i!");
                    console.error('L·ªói:', error);
                });
        });
        document.addEventListener('click', function() {
        let musicFrame = document.getElementById('music-frame');
        if (musicFrame && musicFrame.contentWindow) {
            musicFrame.contentWindow.postMessage('play', '*');
            console.log("G·ª≠i t√≠n hi·ªáu ph√°t nh·∫°c");
        }
    });

    // Th√™m s·ª± ki·ªán d·ª´ng nh·∫°c
    document.addEventListener("DOMContentLoaded", function() {
        let audio = document.getElementById('bg-music');

        // ƒê·∫£m b·∫£o √¢m thanh lu√¥n b·∫Øt ƒë·∫ßu t·ª´ ƒë·∫ßu
        audio.currentTime = 0;

        // Ki·ªÉm tra n·∫øu ƒë√£ ph√°t nh·∫°c tr∆∞·ªõc ƒë√≥ v√† ti·∫øp t·ª•c ph√°t khi t·∫£i l·∫°i trang
        if (localStorage.getItem('isPlaying') === 'true') {
            audio.play().then(() => {
                console.log("Nh·∫°c ƒë√£ t·ª± ƒë·ªông ph√°t l·∫°i t·ª´ tr∆∞·ªõc.");
            }).catch(() => {
                console.log("Autoplay b·ªã ch·∫∑n, ch·ªù thao t√°c t·ª´ ng∆∞·ªùi d√πng.");

                // Ch·ªù ng∆∞·ªùi d√πng click v√†o b·∫•t k·ª≥ ƒë√¢u tr√™n trang ƒë·ªÉ ph√°t nh·∫°c
                document.addEventListener('click', function playAudioOnce() {
                    audio.play();
                    console.log("Nh·∫°c b·∫Øt ƒë·∫ßu ph√°t sau khi ng∆∞·ªùi d√πng t∆∞∆°ng t√°c.");
                    document.removeEventListener('click', playAudioOnce);
                });
            });
        } else {
            // N·∫øu nh·∫°c ch∆∞a t·ª´ng ph√°t, th·ª≠ ph√°t l·∫ßn ƒë·∫ßu
            audio.play().then(() => {
                console.log("Nh·∫°c ƒë√£ t·ª± ƒë·ªông ph√°t.");
                localStorage.setItem('isPlaying', 'true');
            }).catch(() => {
                console.log("Autoplay b·ªã ch·∫∑n, ch·ªù thao t√°c t·ª´ ng∆∞·ªùi d√πng.");
                document.addEventListener('click', function playAudioOnce() {
                    audio.play();
                    localStorage.setItem('isPlaying', 'true');
                    console.log("Nh·∫°c b·∫Øt ƒë·∫ßu ph√°t sau khi ng∆∞·ªùi d√πng t∆∞∆°ng t√°c.");
                    document.removeEventListener('click', playAudioOnce);
                });
            });
        }
    });

    // X√≥a tr·∫°ng th√°i khi nh·∫°c d·ª´ng ƒë·ªÉ ki·ªÉm so√°t l·∫°i khi t·∫£i trang
    document.getElementById('bg-music').onpause = function() {
        localStorage.removeItem('isPlaying');
    };

    // ƒê·∫£m b·∫£o tr·∫°ng th√°i nh·∫°c v·∫´n ti·∫øp t·ª•c khi ng∆∞·ªùi d√πng r·ªùi kh·ªèi trang v√† quay l·∫°i
    window.addEventListener('beforeunload', () => {
        localStorage.setItem('isPlaying', 'true');
    });

    </script>
</body>
</html>
